<div class="modal fade" id="full_user_post" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <div id="post_image">
          
        </div>
        
        <div class = "comments">

          <div class = "caption_section">
            
          </div>

          <div class = "comment_section">

            

          </div>

          <%= form_for Comment.new do |comment| %>

            <%= comment.text_field :text ,placeholder: "Add a comment..." ,class: "comment_field"%>
            <%= comment.hidden_field :post_id, :value => "" %>
          <% end %>

        </div>
      
        
      </div>

    </div>
  </div>
</div>



  <script>
    $('#full_user_post').on('show.bs.modal', function (event) {
      var post = $(event.relatedTarget) // Button that triggered the modal
      var post_id = post.data('post-id') // Extract info from data-* attributes
      var modal = $(this)

      $.ajax({
        url: "/post/" + post_id,
        success: function (data) {
          updateModal(modal, data,post_id)
        }
      })
      // modal.find('.modal-title').text('New message to ' + recipient)
      // modal.find('.modal-body input').val(recipient)
    })

    function updateModal(modal, data,post_id) {
      image = "<img src='" + data.image_url + "' width='500' height='400'>"
      post_user = "<img src='" + data.user.avatar_url + "' class = comment_profile >" + data.user.username + data.caption

     $("#comment_post_id").val(post_id);
     

      other_user_comments = ""
     for (i = 0; i < data.comments.length; i++) {

        other_user_comments += "<div>"+ "<img src='" + data.comments[i].user.avatar_url + "' class = comment_profile >" + data.comments[i].user.username + data.comments[i].text + "</div>"
      }

      
      
      $('#post_image').html(image)
      $('.caption_section').html(post_user)
      $('.comment_section').html(other_user_comments) 
    }